# ================================
# REQUIRED
# ================================

# PostgreSQL Database
# What: Stores all workflows, users, credentials, execution history
# Why: Primary data storage for the application
# Development: postgresql://postgres:postgres@localhost:5434/b0t_dev (Docker on port 5434)
# Production: Auto-provisioned on Railway
DATABASE_URL=postgresql://postgres:postgres@localhost:5434/b0t_dev

# Redis Queue
# What: Powers the workflow execution queue and job scheduling
# Why: Enables concurrent workflow processing and cron-based triggers
# Development: redis://localhost:6380 (Docker on port 6380)
# Production: Use Railway Redis or Upstash
REDIS_URL=redis://localhost:6380

# NextAuth Secret
# What: Encryption key for session tokens and JWT signing
# Why: Secures user authentication
# Generate with: openssl rand -base64 32
# Example: npx auth secret (from Auth.js CLI)
AUTH_SECRET=

# Credential Encryption Key (REQUIRED FOR PRODUCTION)
# What: Dedicated encryption key for API keys and secrets stored in database
# Why: Separates credential encryption from auth tokens (security best practice)
# CRITICAL: Losing this key means ALL stored credentials become unrecoverable
# CRITICAL: If compromised, ALL credentials must be rotated immediately
# Generate with: openssl rand -base64 32
# Production: Store in AWS Secrets Manager, Railway Variables, or equivalent
# Development: Can be omitted (will fall back to AUTH_SECRET with warning)
ENCRYPTION_KEY=

# HOW TO SET UP:
# 1. Generate: openssl rand -base64 32
# 2. Add to .env.local: ENCRYPTION_KEY=<your-generated-key>
# 3. Production: Set as environment variable (Railway/Vercel/etc.)
# 4. Verify it's different from AUTH_SECRET

# ================================
# OPTIONAL
# ================================

# Application URL
# What: Base URL of your application (e.g., https://yourdomain.com)
# Why: Required for OAuth callbacks (Twitter, YouTube login)
# Default: http://localhost:3000 (auto-detected in development)
# NEXTAUTH_URL=http://localhost:3000

# Initial Admin Account
# What: Default admin credentials created on first run
# Why: Allows you to login immediately after setup
# Note: Change these after first login for security
# ADMIN_EMAIL=admin@b0t.dev
# ADMIN_PASSWORD=admin

# Environment Settings
# What: Controls app behavior and logging
# NODE_ENV: 'development' or 'production' (affects caching, errors, performance)
# LOG_LEVEL: 'debug', 'info', 'warn', 'error' (controls console output verbosity)
# NODE_ENV=development
# LOG_LEVEL=info

# ================================
# Scaling Configuration (Advanced)
# ================================
# Note: These are optional performance tuning settings.
# Defaults work fine for most use cases. Only adjust if you're experiencing
# high load or need to optimize for 100+ concurrent workflows.
#
# See docs/SCALING.md for detailed scaling guide

# Database Connection Pool
# What: Max number of PostgreSQL connections this instance can use
# Why: More connections = more concurrent workflows (each needs 1-2 connections)
# Verified capacity: 20 connections = 15-20 concurrent workflows
# Development: 20 (default), Production: 100, Worker: 50 per worker
# DB_POOL_MAX=20
# DB_POOL_MIN=5
# DB_CONNECTION_TIMEOUT=30000
# DB_IDLE_TIMEOUT=30000
# DB_POOL_LOGGING=false

# Workflow Execution Concurrency
# What: Max workflows processed simultaneously by this instance
# Why: Controls how many workflows run at once (limited by DB pool)
# Development: 20 (default), Production: 100 (default)
# Worker instances: 50 (recommended per dedicated worker)
# WORKFLOW_CONCURRENCY=20

# Worker Configuration (for horizontal scaling)
# What: Settings for dedicated workflow worker instances
# Why: Scale workflow processing separately from web server
# WORKER_NAME=worker-1
# WORKER_MODE=false

# ================================
# Important Notes
# ================================
#
# Platform Credentials (Twitter, YouTube, Reddit, OpenAI, etc.):
# - Configured in web UI under Settings â†’ Credentials
# - NOT stored in environment variables
# - Users manage their own API keys per account
#
# Quick Start:
# 1. Copy this file: cp .env.example .env.local
# 2. Set DATABASE_URL, REDIS_URL, AUTH_SECRET
# 3. Run: npm run dev:full
# 4. Access: http://localhost:3000
